//  Unten - ein Rollenspiel im Retrodesign
//
//   Copyright (C) 2017-2018 Heiko Wolf
//
//   This program is free software; you can redistribute it and/or modify
//   it under the terms of the GNU General Public License As published by
//   the Free Software Foundation; either version 2 of the License, or
//   (at your option) any later version.
//
//   This program is distributed in the hope that it will be useful,
//   but WITHOUT ANY WARRANTY; without even the implied warranty of
//   MERCHANTABILITY Or FITNESS For A PARTICULAR PURPOSE.  See the
//   GNU General Public License For more details.
//
//   You should have received a copy of the GNU General Public License along
//   With this program; if not, write to the Free Software Foundation, Inc.,
//   51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//
//   Kontakt: unten@skywave-2000.de

//Startfunktion bei Neuem Spiel
function f_interaktion ()
{
  if ((v_lvl == 1) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) 
  {
    o_lvl0001.p_aktion ();
  }
  else if ((v_lvl == 2) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0002.p_aktion ();
  }
  else if ((v_lvl == 3) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0003.p_aktion ();
  }
  else if ((v_lvl == 4) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0004.p_aktion ();
  }
  else if ((v_lvl == 5) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0005.p_aktion ();
  }

  else if ((v_lvl == 6) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0006.p_aktion ();
  }

  else if ((v_lvl == 7) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0007.p_aktion ();
  }
  else if ((v_lvl == 8) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0008.p_aktion ();
  }
  else if ((v_lvl == 9) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0009.p_aktion ();
  }
  else if ((v_lvl == 10) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0010.p_aktion ();
  }
  else if ((v_lvl == 11) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0011.p_aktion ();
  }
  else if ((v_lvl == 12) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0012.p_aktion ();
  }
  else if ((v_lvl == 13) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0013.p_aktion ();
  }
  else if ((v_lvl == 14) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0014.p_aktion ();
  }
  else if ((v_lvl == 15) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0015.p_aktion ();
  }
  else if ((v_lvl == 16) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0016.p_aktion ();
  }
  else if ((v_lvl == 17) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0017.p_aktion ();
  }
  else if ((v_lvl == 18) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0018.p_aktion ();
  }
  else if ((v_lvl == 19) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0019.p_aktion ();
  }
  else if ((v_lvl == 20) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0020.p_aktion ();
  }
  else if ((v_lvl == 21) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0021.p_aktion ();
  }
  else if ((v_lvl == 22) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0022.p_aktion ();
  }
  else if ((v_lvl == 23) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0))
  {
    o_lvl0023.p_aktion ();
  }
  else if ((v_lvl == 24) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0024.p_aktion ();
  }
  else if ((v_lvl == 25) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0025.p_aktion ();
  }
  else if ((v_lvl == 26) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0026.p_aktion ();
  }
  else if ((v_lvl == 27) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0027.p_aktion ();
  }
   else if ((v_lvl == 28) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0028.p_aktion ();
  }
   else if ((v_lvl == 29) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0029.p_aktion ();
  }
  else if ((v_lvl == 30) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0030.p_aktion ();
  }
  else if ((v_lvl == 31) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0031.p_aktion ();
  }
  else if ((v_lvl == 32) && (v_zone == "Manabrunnen") && (o_fenster.v_aktiv == 0)) {
    o_lvl0032.p_aktion ();
  }
  else if ((v_lvl == 33) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0033.p_aktion ();
  }
  else if ((v_lvl == 34) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0034.p_aktion ();
  }
  else if ((v_lvl == 35) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0035.p_aktion ();
  }
  else if ((v_lvl == 36) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0036.p_aktion ();
  }
  else if ((v_lvl == 37) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0037.p_aktion ();
  }
  else if ((v_lvl == 38) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0038.p_aktion ();
  }
  else if ((v_lvl == 39) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0039.p_aktion ();
  }
  else if ((v_lvl == 40) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0040.p_aktion ();
  }
  else if ((v_lvl == 41) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0041.p_aktion ();
  }
  else if ((v_lvl == 42) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0042.p_aktion ();
  }
  else if ((v_lvl == 43) && (v_zone == "Gebiet") && (o_fenster.v_aktiv == 0)) {
    o_lvl0043.p_aktion ();
  }

  else if (o_fenster.v_aktiv == 1)
  {
    o_fenster.p_clearWindow (20, 260);
  }
  else if ((v_lvl == 1) && (v_zone == "Haendler")) 
  {
    o_haendler.p_kaufen ();
  }
  else if ((v_zone == "Kampf") || (v_zone == "Bosskampf"))
  {
    o_kampf.p_angriffSpieler ();
  }
}

//Tastatursteuerung
function f_taste_druecken (v_ereignis)
{
  var v_tasten_code = v_ereignis.keyCode

  if ((v_tasten_code == 87) && (v_keylock == false) && ((v_zone == "Gebiet")  || (v_zone == "Manabrunnen"))) //nord
  {
    if (!o_fenster.v_aktiv)
    {
      o_charakter.p_bewegNord ();
      o_ausgabe.p_writeKoords ();
      o_proviant.p_test ();
    }
  }

  if ((v_tasten_code == 83) && (v_keylock == false) && ((v_zone == "Gebiet") || (v_zone == "Manabrunnen"))) //süd
  {
    if (!o_fenster.v_aktiv)
    {
      o_charakter.p_bewegSued ();
      o_ausgabe.p_writeKoords ();
      o_proviant.p_test ();
    }
  }

  if ((v_tasten_code == 65) && (v_keylock == false) && ((v_zone == "Gebiet") || (v_zone == "Manabrunnen"))) //west
  {
    if (!o_fenster.v_aktiv)
    {
      o_charakter.p_bewegWest ();
      o_ausgabe.p_writeKoords ();
      o_proviant.p_test ();
    }
  }
  if ((v_tasten_code == 68) && (v_keylock == false) && ((v_zone == "Gebiet") || (v_zone == "Manabrunnen"))) //ost
  {
    if (!o_fenster.v_aktiv)
    {
      o_charakter.p_bewegOst ();
      o_ausgabe.p_writeKoords ();
      o_proviant.p_test ();
    }
  }

  if ((v_tasten_code == 69) && (v_keylock == false)) // E-Taste (Interaktion)
  {
    f_interaktion ();
  } 
  if ((v_tasten_code == 49) && (v_keylock == false) && (v_zone != "Haendler")) // 1-Taste Heiltrank benutzen
  {
    o_heiltrank.p_benutzHeiltrank ();
  }
  if ((v_tasten_code == 50) && (v_keylock == false) && (v_zone != "Haendler")) // 2-Taste Manatrank benutzen
  {
    o_manatrank.p_benutzManatrank ();
  }
  if ((v_tasten_code == 52) && (v_keylock == false) && (v_zone != "Haendler")) // 4-Taste Portalrolle benutzen
  {
    o_portalrolle.p_benutzPortalrolle ();    
  }    
}

//Steuerung über Buttons
function f_button_steuerung (v_id)
{
  //wenn Nordbutton gedrückt
  if ((v_id == 1) && (v_keylock == false))
  {
    if (!o_fenster.v_aktiv)
    {
      o_charakter.p_bewegNord ();
      o_ausgabe.p_writeKoords ();
      o_proviant.p_test ();
    }
  }

  //wenn Südbutton gedrückt
  if ((v_id == 2) && (v_keylock == false))
  {
    if (!o_fenster.v_aktiv)
    {
      o_charakter.p_bewegSued ();
      o_ausgabe.p_writeKoords ();
      o_proviant.p_test ();
    }
  }

  //wenn Westbutton gedrückt
  if ((v_id == 3) && (v_keylock == false))
  {
    if (!o_fenster.v_aktiv)
    {
      o_charakter.p_bewegWest ();
      o_ausgabe.p_writeKoords ();
      o_proviant.p_test ();
    }
  }

  // wenn Ostbutton gedrückt
  if ((v_id == 4) && (v_keylock == false))
  {
    if (!o_fenster.v_aktiv)
    {
      o_charakter.p_bewegOst ();
      o_ausgabe.p_writeKoords ();
      o_proviant.p_test ();
    }
  }

  //wenn Interaktionsbutton gedrückt
  if ((v_id == 5) && (v_keylock == false))
  {
    f_interaktion ();
  }

  //wenn Heiltrankbutton
  if ((v_id == 6) && (v_keylock == false))
  {
    o_heiltrank.p_benutzHeiltrank ();
  }

  //wenn Manatrankbutton
  if ((v_id == 7) && (v_keylock == false))
  {
    o_manatrank.p_benutzManatrank ();
  }

  //wenn Verlassen-Button gedrückt
  if ((v_id == 8) && (v_keylock == false))
  {
    if (v_zone == "Haendler")
    {
      v_zone = "Gebiet";
      o_gui.p_disableGuiHaendler ();
      document.getElementById ("ButtonVerlassen").style.left = "630px";
      document.getElementById ("spielersprite").style.visibility = "visible";
    }
    else if ((v_zone != "Kampf") && (v_zone != "Bosskampf"))
    {
      o_musik.p_stopAll ();
      o_gui.p_disableAllGame ();
      o_gui.p_enableStartscreen ();
      v_textName.value = "Hier Charakternamen eingeben";
      v_zone = "";
      v_lvl = 1;
      document.getElementById ("musik0").play ();
      
    }
    else if ((v_zone == "Kampf") || (v_zone == "Bosskampf"))
    {
      o_flucht.p_test ();
    }
  }
  //wenn Speichern-Button gedrückt
  if ((v_id == 9) && (v_keylock == false))
  {
     o_speichern.p_speichern ();
  }

  //wenn Zauber-Button gedrückt
  if ((v_id == 10) && (v_keylock == false))
  {
    if (document.getElementById("Zauberliste").options[document.getElementById ("Zauberliste").selectedIndex].value == "Regnen")
    {
      o_zauber.p_regnen ();
    }
    else if (document.getElementById("Zauberliste").options[document.getElementById ("Zauberliste").selectedIndex].value == "Sporen")
    {
      o_zauber.p_sporen ();
    }
    else if (document.getElementById("Zauberliste").options[document.getElementById ("Zauberliste").selectedIndex].value == "Umwandlung")
    {
      o_zauber.p_umwandlung ();
    }
    else
    {
      o_fenster.p_drawWindow ();
      o_fenster.p_writeText (v_texte [26], "", "", "", "");
    }
  }

  //wenn Portalrollenbutton gedrückt
  if ((v_id == 11) && (v_keylock == false) && (v_zone != "Haendler"))
  {
    o_portalrolle.p_benutzPortalrolle ();
  }

  if ((v_id == 12) && (v_keylock == false) && (v_zone != "Haendler"))
  {
    o_medizintrank.p_benutzMedizintrank ();
  }
  
  //Soundeffektkontrolle
  if (v_id == 13)
  {
    o_sound.p_kontroll ();
  }
  
  //Musikkontrolle
  if (v_id == 14)
  {
    o_musik.p_kontroll ();
  }

  //Vollbildkontrolle
  if (v_id == 15)
  {
    o_gfx.p_vollbild ();
  }
}

function f_clearTextName () { v_textName.value = ""; }
